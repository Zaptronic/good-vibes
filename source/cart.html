<div class="container clearfix cart">
  <div class="grid_middle">
    {% if errors != blank %}
    <ul class="errors">
      {% for error in errors %}
      <li>{{ error }}</li>
      {% endfor %}
    </ul>
    {% endif %}
    <h1>Cart</h1>
    {% if cart.items != blank %}
    <form method="post" action="/cart">
      <ul class="in-cart">
        {% for item in cart.items %}
        <li>
          <a href="{{ item.product.url }}"><img src="{{ item.product.image | product_image_url size:"small" }}"></a>
          <a href="{{ item.product.url }}">
            <h3>{{ item.product.name }}
              {% unless item.product.has_default_option %}
                <em>{{ item.option.name }}</em>
              {% endunless %}
            </h3>
          </a>
          {{ item | item_quantity_input }}
          <h3>{{ item.price | money_with_sign }}</h3>
          <a href="#" class="remove">remove</a>
        </li>
        {% endfor %}
      </ul>
      {% if cart.shipping.enabled or cart.discount.enabled %}
      <div>
        <label>Shipping</label>
        <div class="wrapper-dropdown" id="cart_options">Select your country
          <ul class="dropdown">
            {% if cart.shipping.enabled %}
              {% if cart.shipping.strict %}
              <li id="cart-shipping-tax">{{ store.country | country_select }}</li>
              {% endif %}
            {% endif %}
          </ul>
        </div>
      </div>
      {% if cart.discount.enabled %}
      <div id="discount_option" {% unless cart.shipping.strict %}class="solo"{% endunless %}>
        {% if cart.discount.pending %}
          <label id="cart_discount_label" for="cart_discount_code">Discount code</label>
          {{ cart.discount | discount_code_input }}
            {% elsif cart.discount.free_shipping %}
              <p>{{ cart.discount.name }} applied!</p>
            {% else %}
            <p>{{ cart.discount.name }} applied!</p>
        {% endif %}>
      </div>
      {% endif %}
      {% endif %}
      <div>
       
        {% if cart.shipping.enabled or cart.discount.enabled %}
            {% unless cart.shipping.pending and cart.discount.pending %}
              <ul>
                <li>
                  <h4>Subtotal</h4>
                  <small class="clearfix">{{ cart.subtotal | money_with_sign }}</small>
                </li>

                {% unless cart.shipping.pending %}
                  <li>
                    <h4>Shipping</h4>
                    <small class="clearfix">{{ cart.shipping.amount | money_with_sign }}</small>
                  </li>
                {% endunless %}

                {% unless cart.discount.pending %}
                  <li>
                    <h4>Discounts</h4>
                    <small class="clearfix">-{{ cart.discount.amount | money_with_sign }}</small>
                  </li>
                {% endunless %}
              </ul>
            {% endunless %}
          {% endif %}
          <h2>Total: {{ cart.total | money_with_sign }}</h2>
          <button type="submit" name="checkout" title="Checkout" id="update">Update cart</button>
          <button type="submit" name="checkout" title="Checkout">Checkout</button>
      </div>
    </form>
    {% else %}
    <div id="cart-message">
      <h3>Oh no your cart is empty!</h3>
      <p>The best thing to do would be to <a href="/">start shopping &rarr;</a></p>
    </div>
    {% endif %}
  </div>
  <a href="#" id="close-cart">close cart</a>
</div>
